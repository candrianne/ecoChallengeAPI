{"openapi":"3.0.0","info":{"title":"Eco challenge API","version":"1.0.0"},"paths":{"/challenge/":{"get":{"tags":["Challenge"],"responses":{"200":{"description":"un tableau avec tout les challenges","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChallengeAdapted"}}}},"404":{"description":"pas de challenge trouvé"},"500":{"description":"Erreur serveur"}}},"patch":{"tags":["Challenge"],"security":[{"bearerAuth":[]}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChallengeUpdate"}}}},"responses":{"204":{"description":"challenge modifié"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeAdmin"},"404":{"description":"challenge non trouvé"},"500":{"description":"Erreur serveur"}}},"delete":{"tags":["Challenge"],"security":[{"bearerAuth":[]}],"responses":{"204":{"description":"challengeSupprimé"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeAdmin"},"404":{"description":"challenge non trouvé"},"500":{"description":"Erreur serveur"}}},"post":{"tags":["Challenge"],"security":[{"bearerAuth":[]}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChallengeCreate"}}}},"responses":{"201":{"description":"challenge ajouté"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeAdmin"},"500":{"description":"Erreur serveur"}}}},"/challenge/{id}":{"get":{"tags":["Challenge"],"parameters":[{"name":"id","description":"ID d'un Challenge","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"le challenge","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Challenge"}}}},"400":{"description":"id pas valide"},"404":{"description":"pas de challenge trouvé avec l'id spécifié"},"500":{"description":"Erreur serveur"}}}},"/challenge/nom/{name}":{"get":{"tags":["Challenge"],"parameters":[{"name":"name","description":"nom d'un challenge","in":"path","required":true,"schema":{"type":"integer"}}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"id du challenge","content":{"text/plain":{"schema":{"type":"integer"}}}},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeAdmin"},"404":{"description":"challenge non trouvée"},"500":{"description":"Erreur serveur"}}}},"/challengeProposition/":{"post":{"tags":["ChallengeProposition"],"security":[{"bearerAuth":[]}],"requestBody":{"$ref":"#/components/requestBodies/CreateChallengeProposition"},"responses":{"201":{"$ref":"#/components/responses/UserChallengeAdded"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"500":{"description":"Erreur serveur"}}},"get":{"tags":["ChallengeProposition"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"un tableau avec tout les propositions de challenge","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ChallengeProposition"}}}}},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeAdmin"},"404":{"description":"proposition non trouvée"},"500":{"description":"Erreur serveur"}}},"delete":{"tags":["ChallengeProposition"],"security":[{"bearerAuth":[]}],"responses":{"204":{"description":"la proposition est supprimée"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeAdmin"},"404":{"description":"proposition non trouvée"},"500":{"description":"Erreur serveur"}}}},"/challengeProposition/nom/{name}":{"get":{"tags":["ChallengeProposition"],"parameters":[{"name":"name","description":"nom d'une proposition de challenge","in":"path","required":true,"schema":{"type":"integer"}}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"id de la proposition","content":{"text/plain":{"schema":{"type":"integer"}}}},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeAdmin"},"404":{"description":"proposition non trouvée"},"500":{"description":"Erreur serveur"}}}},"/friendRequest/":{"post":{"tags":["FriendRequest"],"security":[{"bearerAuth":[]}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"receiverId":{"type":"integer"}},"required":["receiverId"]}}}},"responses":{"201":{"$ref":"#/components/responses/FriendRequestCreated"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"404":{"description":"l'utilisateur auquel on veut envoyer une demande n'existe pas"},"500":{"description":"Erreur serveur"}}},"delete":{"tags":["FriendRequest"],"security":[{"bearerAuth":[]}],"responses":{"204":{"description":"demande d'ami supprimée de la DB"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"404":{"description":"la demande d'ami n'existe pas"},"500":{"description":"Erreur serveur"}}}},"/friendship/":{"post":{"tags":["Friendship"],"security":[{"bearerAuth":[]}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"idNewFriend":{"type":"integer"}},"required":["idNewFriend"]}}}},"responses":{"201":{"$ref":"#/components/responses/FriendshipAdded"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"404":{"description":"la demande d'ami n'a pas été envoyée"},"500":{"description":"Erreur serveur"}}},"get":{"tags":["Friendship"],"parameters":[{"name":"idUser1","description":"ID d'un utilisateur","in":"query","required":true,"schema":{"type":"integer"}},{"name":"idUser2","description":"ID d'un utilisateur","in":"query","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"un tableau avec tout les utilisateurs","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Friendship"}}}},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"404":{"description":"pas d\"amitié trouvée"},"500":{"description":"Erreur serveur"}}},"delete":{"tags":["Friendship"],"security":[{"bearerAuth":[]}],"responses":{"204":{"description":"friendship supprimée de la DB"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"404":{"description":"l'amitié n'existe pas"},"500":{"description":"Erreur serveur"}}}},"/friendship/all":{"get":{"tags":["Friendship"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"un tableau avec toutes les amitiés d'un utilisateur","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Friendship"}}}}},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"404":{"description":"l'utilisateur n'a pas d'amis"},"500":{"description":"Erreur serveur"}}}},"/role/login":{"post":{"tags":["Role"],"description":"renvoie un JWT token permettant l'identification","requestBody":{"description":"login pour la connexion","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Login"}}}},"responses":{"200":{"description":"un token JWT","content":{"application/json":{"schema":{"properties":{"jwt":{"type":"string"}}}}}},"400":{"description":"email ou password manquant"},"404":{"description":"usertype = inconnu"},"500":{"description":"Erreur serveur"}}}},"/user/":{"post":{"tags":["User"],"requestBody":{"$ref":"#/components/requestBodies/InscriptionUser"},"responses":{"201":{"$ref":"#/components/responses/UserInscrit"},"400":{"$ref":"#/components/responses/ErrorJWT"},"500":{"description":"Erreur serveur"}}},"patch":{"tags":["User"],"security":[{"bearerAuth":[]}],"requestBody":{"$ref":"#/components/requestBodies/UserAUpdate"},"responses":{"204":{"$ref":"#/components/responses/UserUpdated"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"500":{"description":"Erreur serveur"}}},"get":{"tags":["User"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"un tableau avec tout les utilisateurs","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/User"}}}}},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeAdmin"},"404":{"description":"User non trouvé"},"500":{"description":"Erreur serveur"}}},"delete":{"tags":["User"],"security":[{"bearerAuth":[]}],"responses":{"204":{"description":"User supprimé de la DB"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"500":{"description":"Erreur serveur"}}}},"/user/{id}":{"get":{"tags":["User"],"parameters":[{"name":"id","description":"ID d'un user","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"$ref":"#/components/responses/UserFound"},"400":{"description":"id pas valide"},"404":{"description":"User non trouvé"},"500":{"description":"Erreur serveur"}}}},"/userChallenge/{id}":{"get":{"tags":["UserChallenge"],"parameters":[{"name":"id","description":"ID d'un userChallenge","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"un tableau avec tout les utilisateurs","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserChallenge"}}}}},"400":{"description":"id pas valide"},"404":{"description":"pas de challenge trouvé avec l'id spécifié"},"500":{"description":"Erreur serveur"}}}},"/userChallenge/":{"patch":{"tags":["UserChallenge"],"security":[{"bearerAuth":[]}],"requestBody":{"$ref":"#/components/requestBodies/UserChallengePauseOrUpdate"},"responses":{"204":{"$ref":"#/components/responses/UserChallengeUpdated"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"404":{"description":"l'utilisateur ne participe pas à ce challenge"},"500":{"description":"Erreur serveur"}}},"post":{"tags":["UserChallenge"],"security":[{"bearerAuth":[]}],"requestBody":{"$ref":"#/components/requestBodies/UserChallengeUpdateOrDelete"},"responses":{"201":{"$ref":"#/components/responses/UserChallengeAdded"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"404":{"description":"le challenge spécifié n'existe pas"},"500":{"description":"Erreur serveur"}}},"delete":{"tags":["UserChallenge"],"security":[{"bearerAuth":[]}],"responses":{"204":{"description":"User supprimé de la DB"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"404":{"description":"l'utilisateur ne participe pas à ce challenge"},"500":{"description":"Erreur serveur"}}}}},"components":{"schemas":{"ChallengeAdapted":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"description":{"type":"string"},"photo":{"type":"string"},"difficulty":{"type":"string"}}},"Challenge":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"description":{"type":"string"},"photo":{"type":"string"},"difficultylevelid":{"type":"integer"}}},"ChallengeUpdate":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"photo":{"type":"string"},"difficultylevelid":{"type":"integer"}}},"ChallengeCreate":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"photo":{"type":"string"},"difficultylevelid":{"type":"integer"}},"required":["name","description","photo","difficultylevelid"]},"ChallengeProposition":{"type":"object","properties":{"id":{"type":"integer"},"description":{"type":"string"},"name":{"type":"string"},"photo":{"type":"string"},"userid":{"type":"integer"},"difficultylevelid":{"type":"integer"}}},"Friendship":{"type":"object","properties":{"iduser1":{"type":"integer"},"iduser2":{"type":"integer"}},"required":["iduser1","iduser2"]},"Login":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string","format":"password"}},"required":["email","password"]},"UserChallenge":{"type":"object","properties":{"startdate":{"type":"string","format":"date"},"enddate":{"type":"string","format":"date"},"name":{"description":"le nom du challenge","type":"string"},"score":{"description":"le score de la difficulté du challenge","type":"integer"},"nbpausedays":{"description":"le nombre de jours de \"pause\" cumulés","type":"integer"}}},"User":{"type":"object","properties":{"id":{"type":"integer"},"email":{"type":"string"},"firstname":{"type":"string"},"lastname":{"type":"string"},"photo":{"type":"string"},"birthyear":{"type":"integer"}}}},"requestBodies":{"CreateChallengeProposition":{"content":{"application/json":{"schema":{"properties":{"name":{"type":"string"},"description":{"type":"string"},"photo":{"type":"string"},"difficultyLevelId":{"type":"integer"}},"required":["name","description","photo","difficultyLevelId"]}}}},"UserChallengePauseOrUpdate":{"content":{"application/json":{"schema":{"properties":{"challengeId":{"type":"integer"},"action":{"type":"string","enum":["resume","pause"]}}}}}},"UserChallengeUpdateOrDelete":{"content":{"application/json":{"schema":{"properties":{"challengeId":{"type":"integer"}},"required":["challengeId"]}}}},"InscriptionUser":{"content":{"application/json":{"schema":{"properties":{"firstName":{"type":"string"},"lastName":{"type":"string"},"email":{"type":"string","format":"email"},"password":{"type":"string","format":"password"},"birthYear":{"type":"integer"}},"required":["firstName","lastName","email","password","birthYear"]}}}},"UserAUpdate":{"content":{"application/json":{"schema":{"properties":{"email":{"type":"string","format":"email"},"firstName":{"type":"string"},"lastName":{"type":"string"},"photo":{"type":"string"},"password":{"type":"string","format":"password"}}}}}}},"responses":{"ChallengePropositionCreated":{"description":"proposition ajoutée à la db"},"FriendRequestCreated":{"description":"nouvelle demande d'ami ajoutée à la db"},"FriendshipAdded":{"description":"nouvelle amitié ajoutée"},"UserChallengeUpdated":{"description":"le challenge de l'utilisateur à été mis a jour"},"UserChallengeAdded":{"description":"le userChallenge a été ajouté à la db"},"UserInscrit":{"description":"l'utilisateur a été ajouté à la BD"},"UserFound":{"description":"renvoie un utilisateur","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"UserUpdated":{"description":"l'utilisateur a été mis à jour"},"mustBeAdmin":{"description":"L'action demandée ne peut être réalisée que par un manager"},"ErrorJWT":{"description":"le JWT n'est pas valide"},"MissingJWT":{"description":"le JWT n'est pas présent"}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}},"tags":[]}